SECTION "RNG Variables", WRAM0

wRNGIndex:: db
wRNGState:: db


SECTION "RNG Routines", ROM0

RNGUpdate::
    ld hl, wRNGIndex
    inc [hl]
    ld a, [hl]
    ld [wRNGIndex], a
    ld c, a
    ld hl, RNGTable
    add hl, bc
    ld a, [hl]
    ld [wRNGState], a
    ret


SECTION "RNG Table", ROM0

RNGTable:: db \
    $AB, $C7, $FA, $BD, $EC, $C9, $49, $88, $18, $E7, $54, $DC, $6C, $39, $FA, $1E, $2D, $69, $A7, $01, $F0, $53, $EF, $F5, $D1, $01, $0E, $57, $04, $B2, $A6, $D1, \
    $CD, $13, $B6, $40, $4D, $1B, $B6, $B2, $B9, $0C, $C7, $0F, $20, $EE, $FA, $DD, $1C, $C4, $B8, $E7, $0D, $A2, $FC, $6A, $BE, $16, $69, $ED, $D7, $C0, $24, $12, \
    $4C, $92, $97, $47, $F9, $32, $9D, $BB, $79, $06, $C3, $03, $D5, $9D, $56, $63, $F1, $23, $68, $FB, $34, $FB, $10, $5E, $C4, $A5, $28, $C2, $3F, $89, $D6, $A0, \
    $1C, $80, $F0, $78, $BC, $0F, $EA, $97, $1D, $9C, $B4, $26, $1A, $BF, $F4, $B8, $36, $54, $DA, $D6, $95, $05, $DE, $9D, $E0, $6F, $A5, $81, $40, $8D, $44, $DD, \
    $61, $E2, $DC, $2D, $D3, $5E, $67, $86, $A8, $F8, $A5, $AF, $6B, $10, $75, $7A, $D9, $4A, $FC, $48, $44, $38, $73, $B8, $DE, $C4, $BD, $E3, $FF, $9E, $84, $06, \
    $BC, $E4, $63, $BF, $F7, $B1, $3F, $09, $B3, $C6, $20, $8F, $1B, $EB, $24, $46, $4C, $57, $69, $21, $CC, $6D, $1D, $9E, $66, $6F, $CB, $2D, $14, $74, $73, $C1, \
    $6F, $4E, $35, $AC, $42, $F8, $4E, $9E, $BD, $06, $48, $33, $0F, $CD, $B1, $66, $D7, $B8, $49, $A9, $49, $F8, $ED, $08, $47, $A2, $A0, $F9, $1E, $FF, $29, $87, \
    $F1, $F6, $BD, $C0, $CA, $87, $08, $B5, $DF, $05, $11, $03, $8F, $74, $84, $74, $89, $03, $19, $7B, $1D, $5B, $88, $73, $8D, $19, $A3, $90, $F9, $FC, $47, $E3, \
    $94, $A0, $50, $80, $31, $96, $87, $F3, $96, $66, $20, $71, $D2, $6A, $55, $55, $C5, $C3, $58, $58, $01, $AE, $0C, $4B, $16, $14, $EA, $24, $86, $65, $9A, $D3, \
    $0F, $3A, $AA, $34, $2E, $81, $2F, $6F, $47, $D1, $BD, $BB, $1E, $AE, $DF, $1C, $2B, $F4, $CF, $03, $77, $41, $6A, $D4, $5E, $BC, $4E, $91, $07, $53, $EC, $8B, \
    $BB, $7B, $D6, $56, $83, $1A, $4F, $3C, $7E, $98, $47, $E2, $53, $5F, $7F, $7F, $A5, $82, $21, $42, $01, $CB, $D6, $3F, $41, $7B, $6B, $32, $33, $67, $62, $72, \
    $45, $A8, $06, $8C, $44, $AD, $CB, $54, $36, $A1, $49, $0D, $24, $D3, $E8, $DA, $3E, $2F, $48, $1B, $0F, $29, $2C, $F4, $11, $46, $BC, $D0, $95, $48, $3E, $31, \
    $F6, $95, $E6, $B6, $91, $DB, $F8, $46, $BE, $02, $D8, $71, $0E, $5B, $82, $DF, $15, $C0, $DB, $1B, $48, $B8, $76, $32, $C7, $4D, $20, $7F, $40, $4C, $64, $FE, \
    $52, $CE, $23, $82, $41, $2D, $4A, $9C, $D0, $FD, $90, $1F, $1C, $6A, $8B, $FD, $90, $CC, $CD, $EB, $98, $71, $B4, $63, $D4, $64, $56, $A3, $7F, $FC, $73, $D7, \
    $B2, $3A, $0C, $AF, $96, $E2, $9A, $DF, $02, $1F, $95, $53, $E6, $E4, $A1, $03, $7A, $E4, $0D, $A3, $84, $2D, $6F, $75, $AC, $81, $A9, $CA, $46, $FA, $EA, $60, \
    $17, $FA, $F6, $22, $F8, $6D, $5A, $2A, $36, $92, $BE, $BC, $20, $33, $38, $A7, $47, $FA, $5C, $1A, $6B, $49, $8E, $3E, $F5, $4D, $2E, $DF, $06, $CE, $FE, $99, \
    $37, $77, $A1, $71, $AA, $FF, $16, $6C, $55, $DF, $11, $FA, $8F, $C1, $77, $E7, $6E, $36, $BF, $9B, $59, $41, $04, $C4, $53, $98, $6E, $BE, $77, $8E, $CD, $63, \
    $F7, $46, $DE, $6C, $8F, $4D, $77, $44, $77, $35, $CC, $96, $54, $9B, $49, $33, $9B, $E0, $55, $7D, $0F, $8B, $8B, $1E, $11, $C5, $8E, $BE, $06, $0B, $57, $9D, \
    $91, $ED, $10, $65, $E8, $88, $88, $D7, $25, $4E, $68, $4B, $76, $17, $94, $63, $B9, $2E, $FA, $39, $DF, $A0, $5D, $76, $2E, $90, $B7, $F1, $45, $6B, $72, $45, \
    $58, $AC, $D2, $59, $EE, $03, $64, $AF, $74, $5C, $A7, $27, $4C, $BA, $AB, $C2, $F6, $3A, $85, $1C, $C6, $B0, $98, $2B, $F3, $33, $2C, $D2, $35, $1A, $75, $C0, \
    $DB, $E3, $79, $FE, $DD, $F7, $80, $77, $AC, $54, $83, $98, $16, $9B, $F8, $10, $1B, $9D, $C2, $82, $9C, $9E, $3D, $FA, $A0, $FB, $64, $0B, $08, $D1, $0D, $D5, \
    $1D, $71, $D4, $DC, $99, $14, $2B, $25, $EA, $C3, $1E, $C5, $F8, $51, $5F, $50, $81, $AB, $4C, $06, $63, $05, $A5, $FE, $18, $9D, $6A, $BB, $7A, $98, $7E, $C0, \
    $67, $BA, $E9, $23, $1A, $1B, $66, $EA, $C7, $C8, $6F, $01, $FC, $61, $E3, $4A, $35, $93, $9A, $51, $04, $09, $15, $3C, $80, $B0, $34, $30, $23, $1E, $BB, $20, \
    $4C, $22, $06, $6B, $6A, $27, $99, $69, $D0, $BC, $46, $AD, $B0, $79, $FC, $75, $C4, $DE, $A8, $D9, $0B, $BA, $2A, $FA, $29, $94, $A7, $8A, $95, $43, $BE, $90, \
    $4A, $B8, $E2, $6D, $FE, $86, $64, $2F, $E9, $D4, $36, $27, $77, $26, $93, $0F, $1E, $06, $D7, $01, $EF, $A7, $8A, $38, $E6, $10, $72, $7B, $39, $A9, $C3, $03, \
    $DA, $B6, $45, $42, $74, $C3, $A9, $DD, $1E, $6D, $67, $F0, $82, $DA, $42, $82, $85, $7C, $D5, $E8, $D1, $9E, $FE, $D8, $A1, $F6, $71, $DE, $A6, $53, $A0, $79, \
    $9F, $74, $A8, $70, $A2, $54, $EE, $56, $8D, $5D, $FC, $11, $90, $D4, $37, $97, $C5, $84, $3B, $B2, $22, $A5, $F0, $A2, $1C, $FD, $7F, $E0, $30, $03, $21, $2F, \
    $EC, $B7, $B0, $DA, $AC, $9E, $60, $1E, $38, $E4, $22, $C0, $69, $A5, $EC, $BF, $A1, $04, $10, $3F, $D0, $ED, $96, $6F, $5B, $CE, $5A, $02, $3C, $09, $6C, $F4, \
    $34, $6C, $9A, $33, $9D, $23, $24, $EE, $59, $A8, $F0, $F0, $79, $39, $10, $05, $38, $91, $18, $3D, $6E, $F5, $B1, $F7, $4B, $B7, $F3, $1E, $A2, $1F, $F7, $06, \
    $68, $04, $1E, $D9, $74, $AD, $0E, $5A, $99, $4F, $9A, $71, $66, $40, $35, $DB, $F3, $20, $BF, $DF, $7E, $23, $10, $8C, $E7, $F7, $BE, $46, $89, $60, $70, $3A, \
    $6B, $B5, $B4, $43, $8D, $5D, $2A, $BB, $BC, $6E, $0F, $F9, $29, $C3, $6A, $6B, $AC, $C0, $13, $B2, $AE, $0A, $43, $04, $96, $50, $15, $64, $BC, $87, $65, $F1, \
    $22, $C0, $EA, $FF, $F9, $2C, $13, $DF, $DE, $FB, $2D, $68, $67, $35, $E0, $B6, $05, $DF, $D2, $A1, $E4, $03, $81, $E7, $EC, $2E, $EC, $A9, $D8, $9D, $D8, $E6